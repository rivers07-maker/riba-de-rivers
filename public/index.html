<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Andres Rios">
    <title>Riba de Rivers</title>
    <link rel="shortcut icon" href="../assets/favicon/favicon.ico" type="image/x-icon">
    <meta name="description"
        content="Cozy apartment in Ribadesella, just minutes from the beach, perfect for enjoying nature and the exquisite Asturian cuisine.">
    <meta name="keywords"
        content="apartment, Ribadesella, beach, nature, Asturian gastronomy, vacation rental, Asturias, tourism, holidays, cozy, near the beach, nature, gastronomy, rural tourism, accommodation">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100..900;1,100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Flatpicker CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Flag Icon CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">

    <!-- Link Custom CSS -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/home.css">
</head>

<body>
    <div class="container">

        <!-- Header -->
        <header>
            <nav class="navbar navbar-expand-lg navbar-1">
                <!-- Left side: Language Dropdown -->
                <div class="dropdown btn-language">
                    <button class="dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        <span class="flag-icon flag-icon-gb"></span>
                        <span>EN</span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                        <li><a class="dropdown-item" onclick="changeLanguage('en')"><span
                                    class="flag-icon flag-icon-gb"></span> EN</a></li>
                        <li><a class="dropdown-item" onclick="changeLanguage('es')"><span
                                    class="flag-icon flag-icon-es"></span> ES</a></li>
                        <li><a class="dropdown-item" onclick="changeLanguage('fr')"><span
                                    class="flag-icon flag-icon-fr"></span> FR</a></li>
                    </ul>
                </div>
                <!-- Center: Brand -->
                <a class="navbar-brand" href="./index.html">
                    <h1 data-i18n="brand_title">Riba de Rivers</h1>
                    <h2 data-i18n="brand_subtitle">Apartments</h2>
                </a>

                <!-- Right side: Book Now Button -->
                <a href="./book.html" class="d-none d-lg-block btn-book-now-1" data-i18n="book_now">Book
                    Now</a>

                <!-- Mobile Toggle Button -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                    aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </nav>

            <!-- Line Divider -->
            <div class="d-none d-lg-block line-divider"></div>

            <!-- Collapsible Menu for Mobile -->
            <nav class="navbar navbar-expand-lg navbar-2">
                <div class="collapse navbar-collapse" id="navbarContent">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link active" href="#" data-i18n="nav.home">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="./overview.html"
                                data-i18n="nav.overview">Overview</a></li>
                        <li class="nav-item"><a class="nav-link" href="./map.html" data-i18n="nav.map">Map</a></li>
                        <li class="nav-item"><a class="nav-link" href="./gallery.html"
                                data-i18n="nav.gallery">Gallery</a></li>
                        <li class="nav-item"><a class="nav-link" href="./book.html" data-i18n="nav.book">Book Now</a>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="./reviews.html"
                                data-i18n="nav.reviews">Reviews</a></li>
                        <li class="nav-item"><a class="nav-link" href="./contact.html"
                                data-i18n="nav.contact">Contact</a></li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="overlay"></div>
            <!-- Title -->
            <h3 class="hero-title" data-i18n="hero_title">Feel like a local</h3>
            <!-- Reservation Box -->
            <div class="reservation-box">

                <form action="/booking" method="post">

                    <div class="reservation-inner">

                        <div class="d-none d-md-block w-100">
                            <label for="arrival" data-i18n="reservation.arrival">Arrival</label>
                            <input type="date" id="arrival" required>
                        </div>

                        <div class="d-none d-md-block w-100">
                            <label for="departure" data-i18n="reservation.departure">Departure</label>
                            <input type="date" id="departure" required>
                        </div>

                        <div class="d-none d-md-block w-100">
                            <label for="guests" data-i18n="reservation.guests">Guests</label>

                            <div class="dropdown">
                                <button class="text-start dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    <span id="guest-summary"></span>
                                </button>
                                <ul class="dropdown-menu" onclick="event.stopPropagation();">
                                    <!-- Adults -->
                                    <li class="counter">
                                        <span>
                                            <span data-i18n="dropdown.adults">Adults</span><br>
                                            <small class="text-muted" data-i18n="dropdown.adults_age">Age:
                                                13 or more</small>
                                        </span>
                                        <div>
                                            <button class="btn" onclick="updateCount(event, 'adults', -1)">-</button>
                                            <span id="adults">1</span>
                                            <button class="btn" onclick="updateCount(event, 'adults', 1)">+</button>
                                        </div>
                                    </li>

                                    <!-- Children -->
                                    <li class="counter">
                                        <span>
                                            <span data-i18n="dropdown.children">Children</span><br>
                                            <small class="text-muted" data-i18n="dropdown.children_age">Ages: 2 -
                                                12</small>
                                        </span>
                                        <div>
                                            <button class="btn" onclick="updateCount(event, 'children', -1)">-</button>
                                            <span id="children">0</span>
                                            <button class="btn" onclick="updateCount(event, 'children', 1)">+</button>
                                        </div>
                                    </li>

                                    <!-- Pets -->
                                    <li class="counter">
                                        <span>
                                            <span data-i18n="dropdown.pets">Pets</span>
                                        </span>
                                        <div>
                                            <button class="btn" onclick="updateCount(event, 'pets', -1)">-</button>
                                            <span id="pets">0</span>
                                            <button class="btn" onclick="updateCount(event, 'pets', 1)">+</button>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                    </div>

                    <!-- HIDDEN INPUTS to store the actual values to be submitted -->
                    <input type="hidden" name="adults" id="input-adults" value="1">
                    <input type="hidden" name="children" id="input-children" value="0">
                    <input type="hidden" name="pets" id="input-pets" value="0">

                    <div class="button-search">
                        <div class="h-100">
                            <img class="d-none d-lg-block"
                                src="../assets/icons/search_26dp_FFF_FILL0_wght500_GRAD0_opsz24.svg" alt="Search icon">
                            <button class="d-none d-md-block" type="submit" id="search-btn"
                                data-i18n="reservation.search">Search</button>
                        </div>
                        <a class="btn-book-now-2 d-block d-md-none" href="./book.html" data-i18n="book_now">Book Now</a>
                    </div>

                </form>

            </div>
        </section>

        <!-- Main Content -->
        <main>
            <section class="content-section">
                <div class="row justify-content-center gap-4">
                    <div class="col-11 col-md-6">
                        <p data-i18n="description_1">
                            Discover a cozy retreat just a few minutes’ walk from the beach, in a tranquil
                            area
                            of
                            Ribadesella, Asturias. This thoughtfully designed space is the perfect place to
                            enjoy
                            the natural beauty of the Asturian coast.
                        </p>
                        <p data-i18n="description_2">Whether you’re seeking a romantic getaway, a family trip, an
                            adventure with
                            friends,
                            or a
                            space to work remotely, Riba de Rivers offers the ideal combination of comfort
                            and
                            exploration. Immerse yourself in the rich local culture as you explore the
                            stunning
                            beaches, natural trails, and delicious Asturian cuisine.</p>
                    </div>
                    <div class="col-11 col-md-5 airbnb-container">
                        <img src="../assets/images/airbnb-logo-3.png" alt="Airbnb logo" class="airbnb-logo">
                        <div class="five-stars">
                            <h6 class="five-title">Five star reviews</h6>
                            <img src="../assets/images/five-stars.png" alt="Five Stars">
                        </div>
                    </div>
                </div>
            </section>
        </main>

    </div>

    <footer>
        <div class="container-fluid bottom-page-navigation">
            <p>&copy; <span data-i18n="footer.copyright">2024 Riba de Rivers Apartments. All rights reserved.</span></p>
        </div>
    </footer>

    <!-- Include i18next and bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next/21.8.8/i18next.min.js"></script>

    <!-- Script for i18next initialization -->
    <script src="../js/i18next/i18next-home.js"></script>

    <!-- Flatpicker JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- Script for Flatpicker initialization -->
    <script>
        flatpickr("#arrival", {
            dateFormat: "d/m/Y",
            minDate: "today",
            onChange: function (selectedDates, dateStr, instance) {
                document.querySelector("#departure")._flatpickr.set("minDate", dateStr);
            }
        });

        flatpickr("#departure", {
            dateFormat: "d/m/Y",
            minDate: "today"
        });
    </script>

    <!-- Script for dropdown counters in Who section calendar submenu -->
    <script>
        function updateCount(event, type, change) {
            event.preventDefault();
            event.stopPropagation();

            let totalGuests = guests.adults + guests.children;

            if (guests[type] + change < 0) return;
            if ((type === "adults" || type === "children") && totalGuests + change > 4) return;
            if (type === "pets" && guests.pets + change > 2) return;

            guests[type] += change;
            document.getElementById(type).innerText = guests[type];
            document.getElementById(`input-${type}`).value = guests[type];

            updateSummary(); // This function is defined in i18next-home.js
        }

        document.addEventListener("i18nReady", () => {
            updateSummary(); // When language is ready, show translated summary
        });
    </script>

    <!-- Script to capture values from inputs to URLSearchParams -->
    <script>
        document.querySelector('#search-btn').addEventListener('click', function (e) {
            e.preventDefault();

            const arrivalDate = document.getElementById('arrival').value;
            const departureDate = document.getElementById('departure').value;
            const guestsCount = document.getElementById('guest-summary').textContent;
            const adultsInput = document.getElementById('input-adults').value;
            const childrenInput = document.getElementById('input-children').value;
            const petsInput = document.getElementById('input-pets').value;

            //Create the URLSearchParams object
            const params = new URLSearchParams({
                arrival: arrivalDate,
                departure: departureDate,
                guests: guestsCount,
                adults: adultsInput,
                children: childrenInput,
                pets: petsInput
            });

            //Get the formatted query string
            const queryString = params.toString();

            //Redirect to book page with the formatted query string
            window.location.href = `./book.html?${queryString}`;
        });
    </script>

</body>

</html>